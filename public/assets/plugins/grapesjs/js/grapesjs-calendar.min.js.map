{"version":3,"sources":["webpack://grapesjs-calendar/webpack/universalModuleDefinition","webpack://grapesjs-calendar/webpack/bootstrap","webpack://grapesjs-calendar/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://grapesjs-calendar/./src/components.js","webpack://grapesjs-calendar/./src/consts.js","webpack://grapesjs-calendar/./src/blocks.js","webpack://grapesjs-calendar/./src/locale/en.js","webpack://grapesjs-calendar/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","editor","opt","domc","DomComponents","defaultType","getType","defaultModel","model","defaultView","view","pfx","calendarClsPfx","CALENDAR_TYPE","addType","extend","defaults","startfrom","startTime","endTime","allDay","droppable","traits","label","changeProp","type","dateInputType","valueTrue","valueFalse","placeholder","script","eventDuration","yahooEventDuration","st","startTimeTmp","endTimeTmp","dropbtn","this","querySelector","calendarDropdown","googlehref","yahoohref","off365href","icalhref","outlookhref","Date","title","address","timezone","tzstart","tzend","duration","ics","formatTime","encodeURI","document","URL","join","date","toISOString","replace","getEndDate","start","getTime","stripISOTime","isodatestr","substr","indexOf","changeTimezone","invdate","toLocaleString","timeZone","diff","href","startTimeG","endTimeG","shiftstart","shiftend","getTimezoneOffset","substring","length","google","Math","floor","onclick","classList","toggle","event","target","matches","contains","remove","isComponent","el","getAttribute","init","reactTo","map","prop","listenTo","updateScript","comps","reset","add","labelCalendarButton","yahoo","off365","ical","outlook","opts","bm","BlockManager","style","defaultStyle","labelCalendar","category","labeCalendarCategory","attributes","class","content","options","i18n","blocks","description","download","loadComponents","loadBlocks","I18n","addMessages","en"],"mappings":";CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAQ,qBAAuBD,IAE/BD,EAAK,qBAAuBC,IAR9B,CASGK,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,G,gBCnErDtC,EAAOD,QAfP,SAAyBwC,EAAKT,EAAKN,GAYjC,OAXIM,KAAOS,EACTtB,OAAOC,eAAeqB,EAAKT,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZqB,cAAc,EACdC,UAAU,IAGZF,EAAIT,GAAON,EAGNe,I,ynBCRM,eAAUG,GAAkB,IAAVC,EAAU,uDAAJ,GAC/B/B,EAAI+B,EACJC,EAAOF,EAAOG,cACdC,EAAcF,EAAKG,QAAQ,WAC3BC,EAAeF,EAAYG,MAC3BC,EAAcJ,EAAYK,KAC1BC,EAAMxC,EAAEyC,eACRC,ECVM,WDYZV,EAAKW,QAAQD,EAAe,CAE1BL,MAAOD,EAAaQ,OAAO,CACzBC,SAAU,EAAF,GACHT,EAAab,UAAUsB,SADpB,CAENC,UAAW9C,EAAE+C,UACbC,QAAShD,EAAEgD,QACXC,OAAQjD,EAAEiD,OACVC,WAAW,EACXC,OAAQ,CAAC,CACPC,MAAO,QACPlD,KAAM,YACNmD,WAAY,EACZC,KAAMtD,EAAEuD,eAEV,CACEH,MAAO,MACPlD,KAAM,UACNmD,WAAY,EACZC,KAAMtD,EAAEuD,eAEV,CACEH,MAAO,UACPlD,KAAM,SACNoD,KAAM,WACND,WAAY,EACZG,UAAW,MACXC,WAAY,MAEf,CACGL,MAAO,QACPlD,KAAM,QACNmD,WAAY,GAEd,CACED,MAAO,cACPlD,KAAM,cACNmD,WAAY,GAEd,CACED,MAAO,UACPlD,KAAM,UACNmD,WAAY,EACZK,YAAa,mBAGfC,OAAQ,WACN,IA2EQC,EAeAC,EAMFC,EAaAC,EACAC,EA5GFC,EAAUC,KAAKC,cAAc,qBAC7BC,EAAmBF,KAAKC,cAAc,8BACtCE,EAAaH,KAAKC,cAAc,oBAChCG,EAAYJ,KAAKC,cAAc,mBAC/BI,EAAaL,KAAKC,cAAc,oBAChCK,EAAWN,KAAKC,cAAc,kBAC9BM,EAAcP,KAAKC,cAAc,qBAEjCpB,EAAY,IAAI2B,KAAK,mBACrB1B,EAAU,IAAI0B,KAAK,iBACnBC,EAAQ,cAERC,EAAU,gBACV3B,EAAS,eACT4B,EAAW,iBACXC,EAAU,IAAIJ,KAAK3B,GACnBgC,EAAQ,IAAIL,KAAK1B,GACjBgC,EAAWD,EAAQD,EA0GnBG,EAAM,WACR,IAAIlB,EAAcC,EAWlB,OAJED,EAAemB,EAAWJ,GAC1Bd,EAAakB,EAAWH,GAGnBI,UACL,mCAAqC,CACnC,kBACA,cACA,eACA,OAASC,SAASC,IAClB,YAActB,GAAgB,IAC9B,UAAYC,GAAc,IAC1B,WAAcW,EACd,gCACA,YAAeC,EACf,OAASQ,SAASC,IAClB,aACA,iBAAiBC,KAAK,QAGxBJ,EAAa,SAASK,GACxB,OAAOA,EAAO,IAAIb,KAAKa,GAAMC,cAAcC,QAAQ,aAAc,IAAM,IAErEC,EAAa,SAASC,EAAOX,GAC/B,OAAO,IAAIN,KAAK,IAAIA,KAAKiB,GAAOC,UA7Jd,IA6J0BZ,IAE1Ca,EAAe,SAASC,GAC1B,OAAOA,EAAWC,OAAO,EAAGD,EAAWE,QAAQ,OAG7CC,EAAiB,SAASV,EAAMV,GAClC,GAAIU,EAAM,CACR,GAAIV,EAAU,CACZ,IAAIqB,EAAU,IAAIxB,KAAKa,EAAKY,eAAe,QAAS,CAClDC,SAAUvB,KAERwB,EAAOd,EAAKK,UAAUM,EAAQN,UAClC,OAAO,IAAIlB,KAAKa,EAAKK,UAAUS,GAEjC,OAAOd,IAMTT,EAAUmB,EAAelD,EAAW8B,GACpCE,EAAQkB,EAAejD,EAAS6B,GAGlCR,EAAWiC,KAjKE,WACX,IAAIC,EAAYC,EAkBRC,EAAYC,GAhBU,GAA1BzD,EAAO+C,QAAQ,QAEjBO,EAAarB,EAAWnC,GACxByD,EAAWtB,EAAWQ,EAAW1C,EAAS,OAC1CuD,EAAaV,EAAaU,GAC1BC,EAAWX,EAAaW,KAYtBC,EAAa,IAAI/B,KAAK3B,EAAU6C,UAzClB,IAyC8B7C,EAAU4D,qBAClD3D,GAAuB,MAAZA,IACb0D,EAAW,IAAIhC,KAAK1B,EAAQ4C,UA3ChB,IA2C4B5C,EAAQ2D,sBAElDJ,EAAarB,EAAWuB,GACxBD,EAAWtB,EAAWwB,GAEtBH,EAAaA,EAAWK,UAAU,EAAGL,EAAWM,OAAS,GACzDL,EAAWA,EAASI,UAAU,EAAGJ,EAASK,OAAS,IAQvD,OAAO1B,UAAU,CACf,yCACA,mBACA,SAAYR,EACZ,WAAa4B,GAAc,IAC3B,KAAOC,GAAY,IACN,QAAU3B,EACvB,6BACA,aAAgBD,EAChB,uBACAU,KAAK,KAmHSwB,GAClBxC,EAAUgC,MA5GF1C,EAAgBmB,GAChBA,EAAMa,UAAYd,EAAQc,WA5Ed,IA6EdZ,EAaEnB,GARoBD,EAAgB,IACtC,IAAMmD,KAAKC,MAAOpD,EAAgB,IAClCmD,KAAKC,MAAOpD,EAAgB,IAAO,KAEXA,EAAgB,GAAK,GAC7C,IAAMA,EAAgB,GACtBA,EAAgB,GAAK,IAQrBE,EAAKoB,EAAWJ,IAAY,GAEzBK,UAAU,CACf,iDACA,UAAaR,EACb,OAASb,EACT,SAAWD,GAAsB,IACjC,0BACA,WAAce,GACdU,KAAK,MA+ETf,EAAW+B,MA3ELvC,EAAemB,EAAWJ,GAC1Bd,EAAakB,EAAWH,GAErBI,UAAU,CACf,qCACA,iCACA,gBACA,YAAeR,EACf,aAAeZ,GAAgB,IAC/B,WAAaC,GAAc,IAC3B,0BACA,aAAgBY,EACkB,QAClCU,KAAK,MA+DTd,EAAS8B,KAAOrB,IAChBR,EAAY6B,KAAOrB,IAEnBhB,EAAQgD,QAAU,WAChB7C,EAAiB8C,UAAUC,OAAO,SAIpC5H,OAAO0H,QAAU,SAAUG,GACpBA,EAAMC,OAAOC,QAAQ,aAClBlD,EAAiB8C,UAAUK,SAAS,SACxCnD,EAAiB8C,UAAUM,OAAO,aAM3C,CACDC,YADC,SACWC,GACV,GAAIA,EAAGC,cACLD,EAAGC,aAAa,kBAAoBjF,EACpC,MAAO,CACLY,KAAMZ,MAOdH,KAAMD,EAAYM,OAAO,CACvBgF,KADuB,WAErB,IAQMC,EARQ,CACZ,QACA,cACA,UACA,SACA,YACA,WAEoBC,KAAI,SAAAC,GAAI,uBAAcA,MAAQzC,KAAK,KACzDpB,KAAK8D,SAAS9D,KAAK7B,MAAOwF,EAAS3D,KAAK+D,cACxC,IAAMC,EAAQhE,KAAK7B,MAAM7B,IAAI,cAGxB0H,EAAMrB,SACTqB,EAAMC,QACND,EAAME,IAAN,uGAE2CpI,EAAEqI,oBAF7C,2EAG6C7F,EAH7C,4GAIoDxC,EAAE8G,OAJtD,kFAKmD9G,EAAEsI,MALrD,mFAMoDtI,EAAEuI,OANtD,iFAOkDvI,EAAEwI,KAPpD,oFAQqDxI,EAAEyI,QARvD,sEE9RK,WAAC3G,GAAsB,IAAd4G,EAAc,uDAAP,GACvB1I,EAAI0I,EACJC,EAAK7G,EAAO8G,aACZpG,EAAMxC,EAAEyC,eACRoG,EAAQ7I,EAAE8I,aAAF,kmCA+CF,GAEZH,EAAGP,IDzDS,WCyDQ,CAClBhF,MAAOpD,EAAE+I,cACTC,SAAUhJ,EAAEiJ,qBACZC,WAAY,CAACC,MAAM,kBACnBC,QAAS,wBAAF,OACS5G,EADT,iDAEHqG,EAFG,qBC9DI,GACX,oBAAqB,I,ikBCMV,mBAAC/G,GAAsB,IAAd4G,EAAc,uDAAP,GACvBW,EAAU,KAAK,CACnBC,KAAM,GAENC,OAAQ,CHVE,YGaV5E,MAAO,GACP6E,YAAa,GACb5E,QAAS,GACT6E,SAAU,qBACV3C,OAAQ,gDACRwB,MAAO,+CACPC,OAAQ,4CACRC,KAAM,yCACNC,QAAS,kDACTxF,OAAQ,KAGR6F,cAAc,EAEd/F,UAAW,GACXC,QAAS,GACT6B,SAAU,GAEVtB,cAAe,iBAEfd,eAAgB,WAEhB4F,oBAAqB,qEAErBU,cAAe,WAEfE,qBAAsB,SAhCX,GAiCNP,GAGPgB,EAAe5H,EAAQuH,GAEvBM,EAAW7H,EAAQuH,GAEnBvH,EAAO8H,MAAQ9H,EAAO8H,KAAKC,YAAZ,GACXC,MACGT,EAAQC","file":"grapesjs-calendar.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-calendar\"] = factory();\n\telse\n\t\troot[\"grapesjs-calendar\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","import {\n  calendarRef\n} from './consts';\n\nexport default function (editor, opt = {}) {\n  const c = opt;\n  const domc = editor.DomComponents;\n  const defaultType = domc.getType('default');\n  const defaultModel = defaultType.model;\n  const defaultView = defaultType.view;\n  const pfx = c.calendarClsPfx;\n  const CALENDAR_TYPE = calendarRef;\n\n  domc.addType(CALENDAR_TYPE, {\n\n    model: defaultModel.extend({\n      defaults: {\n        ...defaultModel.prototype.defaults,\n        startfrom: c.startTime,\n        endTime: c.endTime,\n        allDay: c.allDay,\n        droppable: false,\n        traits: [{\n          label: 'Start',\n          name: 'startfrom',\n          changeProp: 1,\n          type: c.dateInputType,\n        },\n        {\n          label: 'End',\n          name: 'endTime',\n          changeProp: 1,\n          type: c.dateInputType,\n        },\n        {\n          label: 'All Day',\n          name: 'allDay',\n          type: 'checkbox',\n          changeProp: 1,\n          valueTrue: 'YES', // Value to assign when is checked, default: `true`\n          valueFalse: 'NO', // Value to assign when is unchecked, default: `false`\n        },\n       {\n          label: 'Title',\n          name: 'title',\n          changeProp: 1,\n        },\n        {\n          label: 'Description',\n          name: 'description',\n          changeProp: 1,\n        },\n        {\n          label: 'Address',\n          name: 'address',\n          changeProp: 1,\n          placeholder: 'eg. London, UK'\n        }\n        ],\n        script: function () {\n          var MS_IN_MINUTES = 60 * 1000;\n\n          var dropbtn = this.querySelector('[data-js=dropbtn]');\n          var calendarDropdown = this.querySelector('[data-js=calendarDropdown]');\n          var googlehref = this.querySelector('[data-js=google]');\n          var yahoohref = this.querySelector('[data-js=yahoo]');\n          var off365href = this.querySelector('[data-js=off365]');\n          var icalhref = this.querySelector('[data-js=ical]');\n          var outlookhref = this.querySelector('[data-js=outlook]');\n\n          var startTime = new Date('{[ startfrom ]}');\n          var endTime = new Date('{[ endTime ]}');\n          var title = '{[ title ]}';\n          var description = '{[ description ]}';\n          var address = '{[ address ]}';\n          var allDay = '{[ allDay ]}';\n          var timezone = '{[ timezone ]}';\n          var tzstart = new Date(startTime);\n          var tzend = new Date(endTime);\n          var duration = tzend - tzstart;\n\n          var google = function() {\n            var startTimeG, endTimeG;\n            \n            if (allDay.indexOf('YES') != -1) {\n              // google wants 2 consecutive days at 00:00\n              startTimeG = formatTime(startTime);\n              endTimeG = formatTime(getEndDate(endTime, 60 * 24));\n              startTimeG = stripISOTime(startTimeG);\n              endTimeG = stripISOTime(endTimeG);\n            } else {\n              if (timezone && timezone !== ' ') {\n                // google is somehow weird with timezones. \n                // it works better when giving the local\n                // time in the given timezone without the zulu, \n                // and pass timezone as argument.\n                // but then the dates we have loaded \n                // need to shift inverse with tzoffset the \n                // browser gave us. \n                // so\n                var shiftstart, shiftend;\n                shiftstart = new Date(startTime.getTime() - startTime.getTimezoneOffset() * MS_IN_MINUTES);\n                if (endTime && endTime !== ' ') {\n                  shiftend = new Date(endTime.getTime() - endTime.getTimezoneOffset() * MS_IN_MINUTES);\n                }\n                startTimeG = formatTime(shiftstart);\n                endTimeG = formatTime(shiftend);\n                // strip the zulu and pass the tz as argument later\n                startTimeG = startTimeG.substring(0, startTimeG.length - 1);\n                endTimeG = endTimeG.substring(0, endTimeG.length - 1);\n              } else {\n                // use regular times\n                startTimeG = formatTime(startTime);\n                endTimeG = formatTime(endTime);\n              }\n            }\n\n            return encodeURI([\n              'https://www.google.com/calendar/render',\n              '?action=TEMPLATE',\n              '&text=' + (title || ''),\n              '&dates=' + (startTimeG || ''),\n              '/' + (endTimeG || ''),\n              (timezone) ? '&ctz=' + timezone : '',\n              '&details=' + (description || ''),\n              '&location=' + (address || ''),\n              '&sprop=&sprop=name:'\n            ].join(''));\n          };\n\n          var yahoo = function() {\n            if (allDay === 'YES') {\n              var yahooEventDuration = 'allday';\n            } else {\n\n              var eventDuration = tzend ?\n                ((tzend.getTime() - tzstart.getTime()) / MS_IN_MINUTES) :\n                duration;\n\n              // Yahoo dates are crazy, we need to convert the duration from minutes to hh:mm\n\n\n              var yahooHourDuration = eventDuration < 600 ?\n                '0' + Math.floor((eventDuration / 60)) :\n                Math.floor((eventDuration / 60)) + '';\n\n              var yahooMinuteDuration = eventDuration % 60 < 10 ?\n                '0' + eventDuration % 60 :\n                eventDuration % 60 + '';\n\n              var yahooEventDuration = yahooHourDuration + yahooMinuteDuration;\n            }\n\n            // Remove timezone from event time\n            // var st = formatTime(new Date(event.start - (event.start.getTimezoneOffset() * MS_IN_MINUTES))) || '';\n\n            var st = formatTime(tzstart) || '';\n\n            return encodeURI([\n              'http://calendar.yahoo.com/?v=60&view=d&type=20',\n              '&title=' + (title || ''),\n              '&st=' + st,\n              '&dur=' + (yahooEventDuration || ''),\n              '&desc=' + (description || ''),\n              '&in_loc=' + (address || '')\n            ].join(''));\n          };\n\n          var off365 = function() {\n            var startTimeTmp = formatTime(tzstart);\n            var endTimeTmp = formatTime(tzend);\n\n            return encodeURI([\n              'https://outlook.office365.com/owa/',\n              '?path=/calendar/action/compose',\n              '&rru=addevent',\n              '&subject=' + (title || ''),\n              '&startdt=' + (startTimeTmp || ''),\n              '&enddt=' + (endTimeTmp || ''),\n              '&body=' + (description || ''),\n              '&location=' + (address || ''),\n              '&allday=' + (allDay === 'YES') ? 'true' : 'false'\n            ].join(''));\n          };\n\n          var ics = function() {\n            var startTimeTmp, endTimeTmp;\n\n            if (allDay === 'YES') {\n              // DTSTART and DTEND need to be equal and 0\n              startTimeTmp = formatTime(tzstart);\n              endTimeTmp = startTime = stripISOTime(startTime) + 'T000000';\n            } else {\n              startTimeTmp = formatTime(tzstart);\n              endTimeTmp = formatTime(tzend);\n            }\n\n            return encodeURI(\n              'data:text/calendar;charset=utf8,' + [\n                'BEGIN:VCALENDAR',\n                'VERSION:2.0',\n                'BEGIN:VEVENT',\n                'URL:' + document.URL,\n                'DTSTART:' + (startTimeTmp || ''),\n                'DTEND:' + (endTimeTmp || ''),\n                'SUMMARY:' + (title || ''),\n                'DESCRIPTION:' + (description || ''),\n                'LOCATION:' + (address || ''),\n                'UID:' + document.URL,\n                'END:VEVENT',\n                'END:VCALENDAR'].join('\\n'));\n          };\n\n          var formatTime = function(date) {\n            return date ? new Date(date).toISOString().replace(/-|:|\\.\\d+/g, '') : '';\n          };\n          var getEndDate = function(start, duration) {\n            return new Date(new Date(start).getTime() + duration * MS_IN_MINUTES);\n          };\n          var stripISOTime = function(isodatestr) {\n            return isodatestr.substr(0, isodatestr.indexOf('T'));\n          };\n\n          var changeTimezone = function(date, timezone) {\n            if (date) {\n              if (timezone) {\n                var invdate = new Date(date.toLocaleString('en-US', { \n                  timeZone: timezone \n                }));\n                var diff = date.getTime()-invdate.getTime();\n                return new Date(date.getTime()+diff);\n              } \n              return date;\n            }\n            return;\n          };\n\n          if (timezone && timezone !== ' ') {\n            tzstart = changeTimezone(startTime, timezone);\n            tzend = changeTimezone(endTime, timezone);\n          }\n\n          googlehref.href = google();\n          yahoohref.href = yahoo();\n          off365href.href = off365();\n          icalhref.href = ics();\n          outlookhref.href = ics();\n\n          dropbtn.onclick = function() {\n            calendarDropdown.classList.toggle(\"show\");\n          }\n\n          // Close the dropdown menu if the user clicks outside of it\n          window.onclick = function (event) {\n            if (!event.target.matches('.dropbtn')) {\n                if (calendarDropdown.classList.contains('show')) {\n                calendarDropdown.classList.remove('show');\n              }\n            }\n          }\n        }\n      },\n    }, {\n      isComponent(el) {\n        if (el.getAttribute &&\n          el.getAttribute('data-gjs-type') == CALENDAR_TYPE) {\n          return {\n            type: CALENDAR_TYPE\n          };\n        }\n      },\n    }),\n\n\n    view: defaultView.extend({\n      init() {\n        const props = [\n          'title',\n          'description',\n          'address',\n          'allDay',\n          'startTime',\n          'endTime',\n        ];\n        const reactTo = props.map(prop => `change:${prop}`).join(' ');\n        this.listenTo(this.model, reactTo, this.updateScript);\n        const comps = this.model.get('components');\n\n        // Add a basic calendar template if it's not yet initialized\n        if (!comps.length) {\n          comps.reset();\n          comps.add(`\n          <div class=\"dropdown\">\n            <div data-js=\"dropbtn\" class=\"dropbtn\">${c.labelCalendarButton}</div>\n              <div data-js=\"calendarDropdown\" class=\"${pfx}-dropdown dropdown-content\">\n                <a data-js=\"google\" href=\"\" target=\"_balnk\">${c.google}</a>\n                <a data-js=\"yahoo\" href=\"\" target=\"_balnk\">${c.yahoo}</a>\n                <a data-js=\"off365\" href=\"\" target=\"_balnk\">${c.off365}</a>\n                <a data-js=\"ical\" href=\"\" target=\"_balnk\">${c.ical}</a>\n                <a data-js=\"outlook\" href=\"\" target=\"_balnk\">${c.outlook}</a>\n              </div>\n            </div>\n          `);\n        }\n      }\n    }),\n  });\n}\n","export const\r\ncalendarRef = 'calendar';\r\n","import {\n  calendarRef\n} from './consts';\n\n\nexport default (editor, opts = {}) => {\n  const c = opts;\n  const bm = editor.BlockManager;\n  const pfx = c.calendarClsPfx;\n  const style = c.defaultStyle ? `<style>\n  .dropbtn {\n    padding: 16px;\n    font-size: 16px;\n    border: none;\n    cursor: pointer;\n  }\n  \n  /* Dropdown button on hover & focus */\n  .dropbtn:hover, .dropbtn:focus {\n    background-color: #ddd;\n  }\n  \n  /* The container <div> - needed to position the dropdown content */\n  .dropdown {\n    position: relative;\n    display: inline-block;\n  }\n  \n  /* Dropdown Content (Hidden by Default) */\n  .dropdown-content {\n    display: none;\n    min-width: 160px;\n    z-index: 1;\n    position: absolute;\n    opacity: initial;\n    background-color: white;\n    z-index: 50; \n    left: auto;\n    top: auto;\n  }\n  \n  /* Links inside the dropdown */\n  .dropdown-content a {\n    color: black;\n    padding: 12px 16px;\n    text-decoration: none;\n    display: block;\n  }\n  \n  /* Change color of dropdown links on hover */\n  .dropdown-content a:hover {background-color: #ddd;}\n  \n  /* Show the dropdown menu (use JS to add this class to the .dropdown-content container when the user clicks on the dropdown button) */\n  .dropdown-content.show {\n    display: block;\n  }\n  </style>` : '';\n\n  bm.add(calendarRef, {\n    label: c.labelCalendar,\n    category: c.labeCalendarCategory,\n    attributes: {class:'fa fa-calendar'},\n    content: `\n      <div class=\"${pfx}\" data-gjs-type=\"calendar\">\n      ${style}\n      </div>`\n    // media: '<svg>...</svg>',\n  });\n}\n","export default {\n    'grapesjs-calendar': {\n        // 'key': 'value',\n    },\n};","import loadComponents from './components';\nimport loadBlocks from './blocks';\nimport en from './locale/en';\nimport {\n  calendarRef\n} from './consts';\n\nexport default (editor, opts = {}) => {\n  const options = { ...{\n    i18n: {},\n    // default options\n    blocks: [calendarRef],\n\n    // Default style\n    title: '',\n    description: '',\n    address: '',\n    download: 'Calendar-event.ics',\n    google: '<i class=\"fab fa-google\"></i> Google Calendar',\n    yahoo: '<i class=\"fab fa-yahoo\"></i> Yahoo! Calendar',\n    off365: '<i class=\"fab fa-windows\"></i> Office 365',\n    ical: '<i class=\"fab fa-apple\"></i> iCalendar',\n    outlook: '<i class=\"fab fa-windows\"></i> Download Outlook',\n    allDay: 'NO',\n\n    // Default style\n    defaultStyle: true,\n    // Default start time, eg. '2018-01-25 00:00'\n    startTime: '',\n    endTime: '',\n    timezone: '',\n    // Date input type, eg, 'date', 'datetime-local'\n    dateInputType: 'datetime-local',\n    // calendar class prefix\n    calendarClsPfx: 'calendar',\n    // Add to Calendar label\n    labelCalendarButton: '<i class=\"far fa-calendar-plus\"></i> Event zum Kalender hinzufügen',\n    // calendar label\n    labelCalendar: 'Kalendar',\n    // Countdown category label\n    labeCalendarCategory: 'Extra',\n  },  ...opts };\n\n  // Add components\n  loadComponents(editor, options);\n  // Add blocks\n  loadBlocks(editor, options);\n  // Load i18n files\n  editor.I18n && editor.I18n.addMessages({\n      en,\n      ...options.i18n,\n  });\n};"],"sourceRoot":""}